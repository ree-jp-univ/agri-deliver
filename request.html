<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>集荷依頼</title>

    <link rel="stylesheet" href="./css/styles.css" />
</head>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const params = new URLSearchParams(window.location.search);
        const packingId = params.get("packingId");
        if (packingId) {
            localStorage.setItem("packingId", packingId);
            fetch(`http://localhost:8787/deliver/packing?packingId=${packingId}`)
                .then(response => response.json())
                .then(data => {
                    document.getElementById("farmer-name").innerText = data.farmer.name;
                    document.getElementById("farmer-address").innerText = data.farmer.address;
                    document.getElementById("box-num").innerText = data.packing.num;
                    document.getElementById("receive-place").innerText = data.orders.receivePlace;
                })
        }
    });

    function saveSelection() {
        localStorage.setItem('selectedDate', document.getElementById('dateSelect').value);
        localStorage.setItem('selectedTime', document.getElementById('timeSelect').value);
        localStorage.setItem('selectedDate2', document.getElementById('dateSelect2').value);
        localStorage.setItem('selectedTime2', document.getElementById('timeSelect2').value);
    }
</script>

<body>
    <div class="container">
        <div class="header">集荷依頼</div>
        <table class="info-table">
            <tr>
                <td>集荷可能日時</td>
                <td>2025/1/21日 9時以降</td>
            </tr>
            <tr>
                <td>農家名</td>
                <td id="farmer-name">農家A</td>
            </tr>
            <tr>
                <td>集荷住所</td>
                <td id="farmer-address">....</td>
            </tr>
            <tr>
                <td>配送先</td>
                <td id="receive-place">名古屋市立みどり幼稚園</td>
            </tr>
            <tr>
                <td>梱包数</td>
                <td id="box-num">2袋</td>
            </tr>
            <tr>
                <td>備考</td>
                <td id="memo">...</td>
            </tr>
        </table>
        <div class="header">引き取り日時</div>
        <select id="dateSelect">
            <option value="">受取日 ▼</option>
            <option value="2025年2月21日">2025/2/21(火)</option>
            <option value="2025年2月22日">2025/2/22(水)</option>
            <option value="2025年2月23日">2025/2/23(木)</option>
            <option value="2025年2月24日">2025/2/24(金)</option>
            <option value="2025年2月25日">2025/2/25(土)</option>
        </select>
        <select id="timeSelect">
            <option value="">日時 ▼</option>
            <option value="09時">09:00</option>
            <option value="10時">10:00</option>
            <option value="11時">11:00</option>
            <option value="12時">12:00</option>
            <option value="13時">13:00</option>
            <option value="14時">14:00</option>
            <option value="15時">15:00</option>
            <option value="16時">16:00</option>
            <option value="17時">17:00</option>
        </select>
        <div class="header">配送予定日時</div>
        <select id="dateSelect2">
            <option value="">配送日 ▼</option>
            <option value="2025年2月21日">2025/2/21(火)</option>
            <option value="2025年2月22日">2025/2/22(水)</option>
            <option value="2025年2月23日">2025/2/23(木)</option>
            <option value="2025年2月24日">2025/2/24(金)</option>
            <option value="2025年2月25日">2025/2/25(土)</option>
        </select>
        <select id="timeSelect2">
            <option value="">日時 ▼</option>
            <option value="09時">09:00</option>
            <option value="10時">10:00</option>
            <option value="11時">11:00</option>
            <option value="12時">12:00</option>
            <option value="13時">13:00</option>
            <option value="14時">14:00</option>
            <option value="15時">15:00</option>
            <option value="16時">16:00</option>
            <option value="17時">17:00</option>
        </select>
        <div class="button-container">
            <a href="./" class="button button-gray">戻る</a>
            <a href="./request-submit.html" class="button" onclick="saveSelection()">送信する</a>
        </div>
    </div>
</body>

</html>